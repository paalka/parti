<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">

  <title>Parti!</title>
  <meta name="description" content="Parti?">
</head>

<body>
  <canvas width="960" height="500" style="margin: 0 auto;"></canvas>
</body>
<script type="text/javascript" src="https://d3js.org/d3.v4.min.js"></script>

<script>

  var canvas = document.querySelector("canvas");
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;

  var context = canvas.getContext("2d"),
      width = canvas.width,
      height = canvas.height,
      p_radius = 2,
      max_outer_bounds = 5;
      max_speed = 0.15;

  var tau = 2 * Math.PI;
  var n = 150;

  var particles = new Array(n);
  for (var i = 0; i < n; i++) {
    particles[i] = {
      x: Math.random() * width,
      y0: Math.random() * height,
      v: (Math.random() - 0.5) * max_speed
    };
  }

  var t = d3.timer(function(elapsed) {
    // Clear the canvas.
    context.clearRect(0, 0, canvas.width, canvas.height);

    for (var i = 0; i < n; i++) {
      var curr_p = particles[i];
      context.beginPath();

      curr_p.y = curr_p.y0 + elapsed * curr_p.v;

      // Make the particles wrap-around if they go out of bounds.
      if (curr_p.y > height + max_outer_bounds)Â {
        curr_p.y0 -= (height + max_outer_bounds);
      } else if (curr_p.y < -max_outer_bounds) {
        curr_p.y0 += (height - max_outer_bounds);
      }

      context.arc(curr_p.x, curr_p.y, p_radius, 0, tau);
      context.fill();
    }
  });


</script>
</html>
